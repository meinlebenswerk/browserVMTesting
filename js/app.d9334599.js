(function(e){function t(t){for(var r,s,a=t[0],c=t[1],u=t[2],d=0,f=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/browserVMTesting/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("NodeJS VM Browser Implementation tester")]),e._m(0),n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"demo-wrapper"},e._l(e.results,(function(t){return n("div",{staticClass:"demo card"},[n("h2",[e._v(e._s(t.name))]),e._m(1,!0),e._l(t.tests,(function(t){return n("div",{staticClass:"test"},[n("div",{staticClass:"name"},[e._v(e._s(t.name))]),t.result?n("div",{staticClass:"result"},[e._v("✅"),n("div",{staticClass:"description card"},[n("b",[e._v("leak found")]),n("br"),e._v(e._s(t.description))])]):e._e(),t.result?e._e():n("div",{staticClass:"result"},[e._v("❎"),n("div",{staticClass:"description card"},[n("b",[e._v("no leak found")]),n("br"),e._v(e._s(t.description)+" ")])])])}))],2)})),0)]),n("div",{staticClass:"hidden",attrs:{id:"secret"}},[e._v("cake")])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",{staticClass:"text-wrapper text"},[e._v("A small project, built as part of my engineering practice, to outline potential shortcomings of web-based polyfills for NodeJS's vm. The context here is, we were developing a solution for running machine-learning algorithms from a web-based no-code editor. But for optimal usability, this requires some sort of real-time feedback, which I figured is best pushed to the user's browser. (Since the server we are working on will likely die, if you hit it with too many clients at once) There's just a slight problem, the backend's code is purely written in Python, and well, web-browsers don't really like that language. But directly transpiling the Python code to JavaScript and sending that to the clients doesn't seem like a great idea either... Which is why I developed a solution which first transpiles the Python to LUA, and then, using fengari runs that in the browser. While that's not ultra-secure either, it should help avoid some mistakes :) During some research I came accross NodeJS's VM, which provides a separate context for executing JS-Code."),n("br"),n("b",[e._v("Note: THIS IS NOT INTENDED AS A SECURITY MECHANISM")]),e._v(" it's fairly easy to break, as shown by "),n("a",{attrs:{href:"https://gist.github.com/jcreedcmu"}},[e._v("jcreedcmu")]),e._v(" "),n("a",{attrs:{href:"https://gist.github.com/jcreedcmu/4f6e6d4a649405a9c86bb076905696af"}},[e._v("here")]),e._v(" this can fairly easily be circumvented. But anyways, there are browser-implementations of it (They all use an iframe in some sort of way), so I thought, let's test them, maybe they could be useful..."),n("br"),e._v("The thought here was - browsers implement their fair share of security mechanisms, maybe it works better here? But as you can see below (Live Demo, by the way), they're also not that great..."),n("br"),e._v('Do note, these exploits are fairly simple, so if something shows up as "secure", that doesn\'t mean you can trust it :)')])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"name"},[e._v("Test name")]),n("div",{staticClass:"result"},[e._v("result")])])}],s=(n("d3b7"),n("25f0"),n("c1f9"),n("d81d"),n("1276"),n("ac1f"),n("b0c0"),n("a4d3"),n("e01a"),n("0706")),a=n.n(s),c={},u=[];function l(){var e=document.createElement("iframe");return e.style.display="none",e}function d(e){var t,n=l();if(document.body.appendChild(n),e){for(t in e)e.hasOwnProperty(t)&&(n.contentWindow[t]=e[t]);u.push(e)}return n}function f(e,t){var n=d(t),r=n.contentWindow.eval(e);return document.body.removeChild(n),r}function h(e,t){if(!t)throw new Error("Context cannot be undefined");return t.eval(e)}function p(e){this.code=e}p.prototype.runInContext=function(e){return h(this.code,e)},p.prototype.runInNewContext=function(e){return f(this.code,e)},p.prototype.runInThisContext=function(){return h(this.code,window)},c.Script=p,c.createContext=function(e){return d(e).contentWindow},c.isContext=function(e){return-1!==u.indexOf(e)},c.runInContext=function(e,t){return h(e,t)},c.runInDebugContext=function(){throw new Error("vm.runInDebugContext(code) does not work in browsers")},c.runInNewContext=function(e,t){return f(e,t)},c.runInThisContext=function(e){return h(e,window)},c.createScript=function(e){return new c.Script(e)};var m=c,v=function(e){return"(".concat(e.toString(),")()")},w=function(){var e=Object.fromEntries(document.cookie.split("; ").map((function(e){return e.split("=").map(decodeURIComponent)})));return"cake"===e["secret"]},b=function(){return"cake"===window.localStorage.getItem("secret")},y=function(){var e=document.getElementById("secret");return"cake"===(null===e||void 0===e?void 0:e.innerText)},g=[{name:"cookie",description:"Checks if a cookie set via document.cookie can be accessed from inside the VM",f:w},{name:"localStorage",description:"Checks if data written to localStorage is accessible from inside the VM",f:b},{name:"html",description:"Checks if the VM has access to the HTMl-Document",f:y}],_={name:"App",data:function(){return{results:[]}},mounted:function(){this.initializeTests(),this.results.push({name:"vm-browserify",tests:this.testVMBrowserify()}),this.results.push({name:"vm-browser",tests:this.testVMBrowser()}),console.log(this.browserifyResults)},methods:{initializeTests:function(){document.cookie="secret=cake; path=/",window.localStorage.setItem("secret","cake")},runTest:function(e,t){var n=e.name,r=e.description,o=e.f,i=t(o);return{name:n,description:r,result:i}},testVMBrowserify:function(){var e=this,t=function(e){return a.a.runInNewContext(v(e),{})};return g.map((function(n){return e.runTest(n,t)}))},testVMBrowser:function(){var e=this,t={},n=m.createContext(t),r=function(e){var t=new m.Script(v(e));return t.runInContext(n)};return g.map((function(t){return e.runTest(t,r)}))}}},C=_,k=(n("5c0b"),n("2877")),x=Object(k["a"])(C,o,i,!1,null,null,null),S=x.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(S)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"9c0c":function(e,t,n){}});
//# sourceMappingURL=app.d9334599.js.map